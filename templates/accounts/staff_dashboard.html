{% extends "base.html" %}
{% load widget_tweaks %}

{% block content %}
<div class="flex flex-col md:flex-row w-full max-w-7xl mx-auto mt-6 gap-6 px-4 relative">

  <!-- Sidebar (Desktop) -->
  <aside class="hidden md:flex flex-col w-64 bg-white rounded-xl shadow-md p-5 flex-shrink-0" id="sidebar">
    <h2 class="text-xl font-bold text-nhc-blue mb-6">STAFF Menu</h2>
    <nav class="flex flex-col space-y-3">
      <a href="{% url 'staff_dashboard' %}" class="flex items-center gap-3 px-3 py-2 rounded-md font-medium {% if request.path == '/accounts/staff/dashboard/' %}bg-nhc-lightgray text-nhc-blue{% else %}text-nhc-black hover:text-nhc-blue hover:bg-nhc-lightgray{% endif %}">
        <!-- Home Icon -->
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
          <path stroke-linecap="round" stroke-linejoin="round" d="M3 12l9-9 9 9M4 10v10h16V10" />
        </svg>
        Dashboard
      </a>
      <a href="{% url 'assets:staff_manage_assets' %}" class="flex items-center gap-3 px-3 py-2 rounded-md font-medium {% if request.path == '/accounts/staff/manage-assets/' %}bg-nhc-lightgray text-nhc-blue{% else %}text-nhc-black hover:text-nhc-blue hover:bg-nhc-lightgray{% endif %}">
        <!-- Clipboard List Icon -->
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
          <path stroke-linecap="round" stroke-linejoin="round" d="M9 12h6m-6 4h6M5 6h14M5 6v14h14V6H5z"/>
        </svg>
        Manage Assets
      </a>
      <a href="{% url 'requests:manage_requests' %}" class="flex items-center gap-3 px-3 py-2 rounded-md font-medium {% if request.path == '/accounts/staff/manage-requests/' %}bg-nhc-lightgray text-nhc-blue{% else %}text-nhc-black hover:text-nhc-blue hover:bg-nhc-lightgray{% endif %}">
        <!-- Inbox Icon -->
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
          <path stroke-linecap="round" stroke-linejoin="round" d="M20 13V7a2 2 0 00-2-2H6a2 2 0 00-2 2v6m16 0v6a2 2 0 01-2 2H6a2 2 0 01-2-2v-6"/>
        </svg>
        Manage Requests
      </a>
      <a href="{% url 'staff_report' %}" class="flex items-center gap-3 px-3 py-2 rounded-md font-medium {% if request.path == '/accounts/staff/report/' %}bg-nhc-lightgray text-nhc-blue{% else %}text-nhc-black hover:text-nhc-blue hover:bg-nhc-lightgray{% endif %}">
        <!-- Chart Bar Icon -->
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
          <path stroke-linecap="round" stroke-linejoin="round" d="M3 3v18h18" />
          <path stroke-linecap="round" stroke-linejoin="round" d="M7 14h3v7H7zM12 10h3v11h-3zM17 6h3v15h-3z"/>
        </svg>
        Report
      </a>
    </nav>
  </aside>

  <!-- Mobile Sidebar Overlay -->
  <div id="mobileSidebar" class="fixed inset-0 z-40 bg-black bg-opacity-30 transform -translate-x-full transition-transform md:hidden">
    <div class="w-64 h-full bg-white shadow-md p-5">
      <div class="flex justify-between items-center mb-6">
        <h2 class="text-xl font-bold text-nhc-blue">Staff Menu</h2>
        <button id="closeSidebar" class="text-nhc-blue hover:text-nhc-black">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"/>
          </svg>
        </button>
      </div>
      <nav class="flex flex-col space-y-3">
        <a href="{% url 'staff_dashboard' %}" class="flex items-center gap-3 px-3 py-2 rounded-md font-medium {% if request.path == '/accounts/staff/dashboard/' %}bg-nhc-lightgray text-nhc-blue{% else %}text-nhc-black hover:text-nhc-blue hover:bg-nhc-lightgray{% endif %}">Dashboard</a>
        <a href="{% url 'assets:staff_manage_assets' %}" class="flex items-center gap-3 px-3 py-2 rounded-md font-medium {% if request.path == '/accounts/staff/manage-assets/' %}bg-nhc-lightgray text-nhc-blue{% else %}text-nhc-black hover:text-nhc-blue hover:bg-nhc-lightgray{% endif %}">Manage Assets</a>
        <a href="{% url 'staff_manage_requests' %}" class="flex items-center gap-3 px-3 py-2 rounded-md font-medium {% if request.path == '/accounts/staff/manage-requests/' %}bg-nhc-lightgray text-nhc-blue{% else %}text-nhc-black hover:text-nhc-blue hover:bg-nhc-lightgray{% endif %}">Manage Requests</a>
        <a href="{% url 'staff_report' %}" class="flex items-center gap-3 px-3 py-2 rounded-md font-medium {% if request.path == '/accounts/staff/report/' %}bg-nhc-lightgray text-nhc-blue{% else %}text-nhc-black hover:text-nhc-blue hover:bg-nhc-lightgray{% endif %}">Report</a>
      </nav>
    </div>
  </div>

  <!-- Mobile Sidebar Toggle -->
  <div class="md:hidden mb-4">
    <button id="sidebarToggle" class="bg-nhc-blue text-white px-4 py-2 rounded-md flex items-center gap-2">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
        <path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h16"/>
      </svg>
      Menu
    </button>
  </div>

  <!-- Main Content -->
  <div id="mainContent" class="flex-grow bg-white rounded-xl shadow-md p-4 md:p-6 z-10 relative transition-all duration-300">
    {% block staff_content %}


    {% endblock %}
  </div>
</div>

<!-- Mobile Sidebar JS -->
<script>
  const sidebarToggle = document.getElementById("sidebarToggle");
  const mobileSidebar = document.getElementById("mobileSidebar");
  const closeSidebar = document.getElementById("closeSidebar");
  const mainContent = document.getElementById("mainContent");

  const openSidebar = () => {
    mobileSidebar.classList.remove("-translate-x-full");
    mobileSidebar.classList.add("translate-x-0");
    mainContent.classList.add("scale-95", "opacity-80");
  };

  const closeSidebarFunc = () => {
    mobileSidebar.classList.add("-translate-x-full");
    mobileSidebar.classList.remove("translate-x-0");
    mainContent.classList.remove("scale-95", "opacity-80");
  };

  sidebarToggle.addEventListener("click", openSidebar);
  closeSidebar.addEventListener("click", closeSidebarFunc);
  mobileSidebar.addEventListener("click", (e) => {
    if (e.target === mobileSidebar) closeSidebarFunc();
  });
</script>
{% endblock %}
